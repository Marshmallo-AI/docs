"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[29],{6890(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"sdk/typescript","title":"TypeScript","description":"There is no TypeScript SDK yet. Use the HTTP API directly from Node/TypeScript.","source":"@site/docs/sdk/typescript.md","sourceDirName":"sdk","slug":"/sdk/typescript","permalink":"/sdk/typescript","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/sdk/typescript.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Python","permalink":"/sdk/python"},"next":{"title":"HTTP API","permalink":"/sdk/http"}}');var d=s(4848),i=s(8453);const a={sidebar_position:2},r="TypeScript",l={},o=[{value:"Required Data",id:"required-data",level:2},{value:"Endpoints",id:"endpoints",level:2},{value:"1) Send Agent Definition",id:"1-send-agent-definition",level:2},{value:"2) Start A Task",id:"2-start-a-task",level:2},{value:"3) Capture LLM Calls (Required)",id:"3-capture-llm-calls-required",level:2},{value:"4) Capture Tool Calls (Required)",id:"4-capture-tool-calls-required",level:2},{value:"5) End The Task",id:"5-end-the-task",level:2},{value:"6) Send Events As A Batch",id:"6-send-events-as-a-batch",level:2},{value:"7) Fetch Learnings",id:"7-fetch-learnings",level:2},{value:"Multi\u2011Agent Notes",id:"multiagent-notes",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"typescript",children:"TypeScript"})}),"\n",(0,d.jsx)(n.p,{children:"There is no TypeScript SDK yet. Use the HTTP API directly from Node/TypeScript.\nThis page shows the full, required flow."}),"\n",(0,d.jsx)(n.p,{children:"Marlo does not run your agent. You only send events and pull learnings."}),"\n",(0,d.jsx)(n.h2,{id:"required-data",children:"Required Data"}),"\n",(0,d.jsxs)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:[(0,d.jsx)(n.p,{children:"You must send these fields on every event:"}),(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"run_id"}),": session id (number)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"agent_id"}),": stable id for the agent (string)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"parent_agent_id"}),": parent agent id (string or null)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"invocation_id"}),": unique id per run/trace (string UUID)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"task_id"}),": numeric task id (number)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"event_type"}),": one of ",(0,d.jsx)(n.code,{children:"agent_start"}),", ",(0,d.jsx)(n.code,{children:"agent_end"}),", ",(0,d.jsx)(n.code,{children:"agent_definition"}),", ",(0,d.jsx)(n.code,{children:"llm_call"}),", ",(0,d.jsx)(n.code,{children:"tool_call"}),", ",(0,d.jsx)(n.code,{children:"log"}),", ",(0,d.jsx)(n.code,{children:"task_start"}),", ",(0,d.jsx)(n.code,{children:"task_end"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"payload"}),": event data (object)"]}),"\n"]})]}),"\n",(0,d.jsx)(n.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,d.jsxs)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:[(0,d.jsx)(n.p,{children:"All requests use:"}),(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"POST {endpoint}/events"})," for event batches"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"POST {endpoint}/learnings"})," to fetch learning state"]}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"Authorization: Bearer <write_key>"})}),"\n"]})]}),"\n",(0,d.jsx)(n.h2,{id:"1-send-agent-definition",children:"1) Send Agent Definition"}),"\n",(0,d.jsxs)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:[(0,d.jsx)(n.p,{children:"Send this once per process start and then daily."}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:'const event = {\n  run_id,\n  agent_id: "support-agent",\n  parent_agent_id: null,\n  invocation_id,\n  task_id: null,\n  event_type: "agent_definition",\n  payload: {\n    agent_id: "support-agent",\n    parent_agent_id: null,\n    name: "support-agent",\n    system_prompt: SYSTEM_PROMPT,\n    tool_definitions: TOOL_DEFINITIONS,\n    mcp_definitions: [],\n    model_config: { model: "gpt-4.1-mini" },\n    definition_hash: "sha256-hash",\n  },\n};\n'})})]}),"\n",(0,d.jsx)(n.h2,{id:"2-start-a-task",children:"2) Start A Task"}),"\n",(0,d.jsxs)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:[(0,d.jsx)(n.p,{children:"Each user task must have its own start/end."}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:'const taskId = Date.now();\n\nconst taskStart = {\n  run_id,\n  agent_id,\n  parent_agent_id: null,\n  invocation_id,\n  task_id: taskId,\n  event_type: "task_start",\n  payload: {\n    task_id: taskId,\n    task: "reset my password",\n    metadata: { user_id: "u_123" },\n  },\n};\n'})})]}),"\n",(0,d.jsx)(n.h2,{id:"3-capture-llm-calls-required",children:"3) Capture LLM Calls (Required)"}),"\n",(0,d.jsxs)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:[(0,d.jsx)(n.p,{children:"Every model call must be logged with messages, response, usage, and reasoning."}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:'const llmEvent = {\n  run_id,\n  agent_id,\n  parent_agent_id: null,\n  invocation_id,\n  task_id: taskId,\n  event_type: "llm_call",\n  payload: {\n    messages,\n    model_params: { model: "gpt-4.1-mini" },\n    response,\n    usage,\n    reasoning, // required if your model returns it\n  },\n};\n'})})]}),"\n",(0,d.jsx)(n.h2,{id:"4-capture-tool-calls-required",children:"4) Capture Tool Calls (Required)"}),"\n",(0,d.jsxs)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:[(0,d.jsx)(n.p,{children:"Every tool call must be logged with input and output."}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:'const toolEvent = {\n  run_id,\n  agent_id,\n  parent_agent_id: null,\n  invocation_id,\n  task_id: taskId,\n  event_type: "tool_call",\n  payload: {\n    tool_name: "get_user_info",\n    input: { user_id: "u_123" },\n    output: { email: "user@example.com" },\n  },\n};\n'})})]}),"\n",(0,d.jsx)(n.h2,{id:"5-end-the-task",children:"5) End The Task"}),"\n",(0,d.jsxs)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:[(0,d.jsx)(n.p,{children:"End each task with status and final answer."}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:'const taskEnd = {\n  run_id,\n  agent_id,\n  parent_agent_id: null,\n  invocation_id,\n  task_id: taskId,\n  event_type: "task_end",\n  payload: {\n    task_id: taskId,\n    status: "success",\n    final_answer: "Password reset link sent.",\n  },\n};\n'})})]}),"\n",(0,d.jsx)(n.h2,{id:"6-send-events-as-a-batch",children:"6) Send Events As A Batch"}),"\n",(0,d.jsx)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:'await fetch(`${endpoint}/events`, {\n  method: "POST",\n  headers: {\n    "Authorization": `Bearer ${writeKey}`,\n    "Content-Type": "application/json",\n  },\n  body: JSON.stringify([event, taskStart, llmEvent, toolEvent, taskEnd]),\n});\n'})})}),"\n",(0,d.jsx)(n.h2,{id:"7-fetch-learnings",children:"7) Fetch Learnings"}),"\n",(0,d.jsxs)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:[(0,d.jsxs)(n.p,{children:["Use your ",(0,d.jsx)(n.code,{children:"agent_id"})," as ",(0,d.jsx)(n.code,{children:"learning_key"}),":"]}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:'const res = await fetch(`${endpoint}/learnings`, {\n  method: "POST",\n  headers: {\n    "Authorization": `Bearer ${writeKey}`,\n    "Content-Type": "application/json",\n  },\n  body: JSON.stringify({ learning_key: "support-agent" }),\n});\n\nconst data = await res.json();\nconst learningState = data.learning_state || data;\n'})}),(0,d.jsx)(n.p,{children:"Inject learnings into your system prompt before each run."})]}),"\n",(0,d.jsx)(n.h2,{id:"multiagent-notes",children:"Multi\u2011Agent Notes"}),"\n",(0,d.jsx)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:(0,d.jsxs)(n.p,{children:["Each agent gets its own ",(0,d.jsx)(n.code,{children:"agent_id"})," and ",(0,d.jsx)(n.code,{children:"agent_definition"}),".\nSet ",(0,d.jsx)(n.code,{children:"parent_agent_id"})," for child agents so the tree is preserved."]})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(c,{...e})}):c(e)}},8453(e,n,s){s.d(n,{R:()=>a,x:()=>r});var t=s(6540);const d={},i=t.createContext(d);function a(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);