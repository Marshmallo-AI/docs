"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[333],{4798(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"sdk/python/quickstart","title":"Quickstart","description":"Install","source":"@site/docs/sdk/python/quickstart.md","sourceDirName":"sdk/python","slug":"/sdk/python/quickstart","permalink":"/sdk/python/quickstart","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/sdk/python/quickstart.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Python SDK","permalink":"/sdk/python/overview"},"next":{"title":"Capture Events","permalink":"/sdk/python/capture-events"}}');var a=s(4848),i=s(8453);const r={sidebar_position:2},o="Quickstart",l={},d=[{value:"Install",id:"install",level:2},{value:"Define Your Agent",id:"define-your-agent",level:2},{value:"Create a Session",id:"create-a-session",level:2},{value:"Capture Events",id:"capture-events",level:2},{value:"Finalize and Get Learnings",id:"finalize-and-get-learnings",level:2},{value:"End the Session",id:"end-the-session",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"quickstart",children:"Quickstart"})}),"\n",(0,a.jsx)(n.h2,{id:"install",children:"Install"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"pip install marlo\n"})}),"\n",(0,a.jsx)(n.h2,{id:"define-your-agent",children:"Define Your Agent"}),"\n",(0,a.jsx)(n.p,{children:"Marlo needs your agent definition once per run. This includes system prompt, tool definitions, MCP definitions, and model config."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'import marlo.learning as marlo\n\nSYSTEM_PROMPT = "You are a support agent."\nTOOL_DEFINITIONS = [{"name": "search_orders", "description": "lookup orders"}]\nMCP_DEFINITIONS = []\nMODEL_CONFIG = {"provider": "gemini", "model": "gemini-3-flash"}\n\n@marlo.trace(\n    system_prompt=SYSTEM_PROMPT,\n    tool_definitions=TOOL_DEFINITIONS,\n    mcp_definitions=MCP_DEFINITIONS,\n    model_config=MODEL_CONFIG,\n)\ndef run_agent(task: str) -> str:\n    return "OK"\n'})}),"\n",(0,a.jsxs)(n.p,{children:["If you cannot use decorators, call ",(0,a.jsx)(n.code,{children:"marlo.register_agent_definition(...)"})," once at startup."]}),"\n",(0,a.jsx)(n.h2,{id:"create-a-session",children:"Create a Session"}),"\n",(0,a.jsx)(n.p,{children:"Start one session for a long chat or a long job. A session can hold many tasks.\nStorage is required. Marlo will not run without a database."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'import marlo.learning as marlo\nfrom marlo.storage.postgres.database import Database\nfrom marlo.core.config.models import StorageConfig\n\nconfig = StorageConfig(database_url="postgresql://user:pass@localhost:5432/marlo")\ndb = Database(config)\nawait db.connect()\n\nsession_id, learning_state = await marlo.init_session(\n    db,\n    task="support chat",\n    metadata={"agent_id": "support_agent"},\n)\n'})}),"\n",(0,a.jsx)(n.p,{children:"You can reuse the same session for many tasks in a row."}),"\n",(0,a.jsx)(n.h2,{id:"capture-events",children:"Capture Events"}),"\n",(0,a.jsx)(n.p,{children:"Start a task, then emit tool/LLM calls while the agent works."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'import marlo.learning as marlo\n\nevents, subscription = marlo.attach_event_sink()\ntask_id = await marlo.start_task(db, session_id=session_id, task="refund order 123")\n\nmarlo.track_tool(tool="search_orders", input={"order_id": "123"}, output={"status": "ok"})\nmarlo.track_llm(\n    input="refund order 123",\n    output="Refund completed.",\n    model="gemini-3-flash",\n    usage={"prompt_tokens": 10, "completion_tokens": 4, "total_tokens": 14},\n    reasoning={"summary": "Order found, refund issued."},\n)\n\nReasoning is optional. If your model does not return it, leave it out.\n\nawait marlo.persist_events(db, session_id=session_id, events=events)\nsubscription.unsubscribe()\n'})}),"\n",(0,a.jsx)(n.h2,{id:"finalize-and-get-learnings",children:"Finalize and Get Learnings"}),"\n",(0,a.jsx)(n.p,{children:"End the task, then run reward + learning for the session."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'await marlo.finalize_task(\n    db,\n    task_id=task_id,\n    status="success",\n    final_answer="Refund completed.",\n)\n\nawait marlo.run_reward_and_learning(db, session_id=session_id)\nlearning_state = await marlo.get_learning_state(db, learning_key="support_agent")\n'})}),"\n",(0,a.jsx)(n.p,{children:"If you have more tasks, start another task and repeat the same steps."}),"\n",(0,a.jsx)(n.h2,{id:"end-the-session",children:"End the Session"}),"\n",(0,a.jsx)(n.p,{children:"If the session is finished, close it."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'await marlo.finalize_session(\n    db,\n    session_id=session_id,\n    status="success",\n    final_answer="Session finished",\n)\n'})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453(e,n,s){s.d(n,{R:()=>r,x:()=>o});var t=s(6540);const a={},i=t.createContext(a);function r(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);