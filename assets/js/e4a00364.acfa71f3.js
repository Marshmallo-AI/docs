"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[546],{4700(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"sdk/http","title":"HTTP API","description":"Use this if you do not want a SDK or you are in a non\u2011Python runtime.","source":"@site/docs/sdk/http.md","sourceDirName":"sdk","slug":"/sdk/http","permalink":"/sdk/http","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/sdk/http.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"TypeScript","permalink":"/sdk/typescript"},"next":{"title":"Tracing","permalink":"/features/tracing"}}');var t=s(4848),l=s(8453);const i={sidebar_position:3},r="HTTP API",d={},o=[{value:"Event Shape",id:"event-shape",level:2},{value:"Required Events",id:"required-events",level:2},{value:"agent_definition payload",id:"agent_definition-payload",level:3},{value:"task_start payload",id:"task_start-payload",level:3},{value:"llm_call payload",id:"llm_call-payload",level:3},{value:"tool_call payload",id:"tool_call-payload",level:3},{value:"task_end payload",id:"task_end-payload",level:3},{value:"Send Events",id:"send-events",level:2},{value:"Fetch Learnings",id:"fetch-learnings",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"http-api",children:"HTTP API"})}),"\n",(0,t.jsx)(n.p,{children:"Use this if you do not want a SDK or you are in a non\u2011Python runtime."}),"\n",(0,t.jsx)(n.p,{children:"Marlo only needs two endpoints:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"POST {endpoint}/events"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"POST {endpoint}/learnings"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"All requests require:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Authorization: Bearer <write_key>\nContent-Type: application/json\n"})}),"\n",(0,t.jsx)(n.h2,{id:"event-shape",children:"Event Shape"}),"\n",(0,t.jsxs)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:[(0,t.jsx)(n.p,{children:"Every event is a JSON object with this shape:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "run_id": 1720000000000,\n  "agent_id": "support-agent",\n  "parent_agent_id": null,\n  "invocation_id": "uuid-123",\n  "task_id": 1720000000000000,\n  "event_type": "llm_call",\n  "payload": {}\n}\n'})})]}),"\n",(0,t.jsx)(n.h2,{id:"required-events",children:"Required Events"}),"\n",(0,t.jsxs)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:[(0,t.jsx)(n.p,{children:"To get rewards and learnings you must send:"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"agent_definition"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"task_start"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"llm_call"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tool_call"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"task_end"})}),"\n"]}),(0,t.jsx)(n.h3,{id:"agent_definition-payload",children:"agent_definition payload"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "agent_id": "support-agent",\n  "parent_agent_id": null,\n  "name": "support-agent",\n  "system_prompt": "You are a support agent",\n  "tool_definitions": [],\n  "mcp_definitions": [],\n  "model_config": { "model": "gpt-4.1-mini" },\n  "definition_hash": "sha256-hash"\n}\n'})}),(0,t.jsx)(n.h3,{id:"task_start-payload",children:"task_start payload"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "task_id": 1720000000000000,\n  "task": "reset my password",\n  "metadata": { "user_id": "u_123" }\n}\n'})}),(0,t.jsx)(n.h3,{id:"llm_call-payload",children:"llm_call payload"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "messages": [{ "role": "user", "content": "reset my password" }],\n  "model_params": { "model": "gpt-4.1-mini" },\n  "response": { "text": "Sure, I can help" },\n  "usage": { "prompt_tokens": 12, "completion_tokens": 18, "total_tokens": 30 },\n  "reasoning": { "summary": "User asked for reset. Provide steps." }\n}\n'})}),(0,t.jsx)(n.h3,{id:"tool_call-payload",children:"tool_call payload"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "tool_name": "get_user_info",\n  "input": { "user_id": "u_123" },\n  "output": { "email": "user@example.com" }\n}\n'})}),(0,t.jsx)(n.h3,{id:"task_end-payload",children:"task_end payload"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "task_id": 1720000000000000,\n  "status": "success",\n  "final_answer": "Reset link sent."\n}\n'})})]}),"\n",(0,t.jsx)(n.h2,{id:"send-events",children:"Send Events"}),"\n",(0,t.jsxs)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:[(0,t.jsx)(n.p,{children:"Send a batch of events in one request:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST "$MARLO_ENDPOINT/events" \\\n  -H "Authorization: Bearer $MARLO_WRITE_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d \'[\n    {\n      "run_id": 1720000000000,\n      "agent_id": "support-agent",\n      "parent_agent_id": null,\n      "invocation_id": "uuid-123",\n      "task_id": 1720000000000000,\n      "event_type": "task_start",\n      "payload": { "task_id": 1720000000000000, "task": "reset my password" }\n    }\n  ]\'\n'})})]}),"\n",(0,t.jsx)(n.h2,{id:"fetch-learnings",children:"Fetch Learnings"}),"\n",(0,t.jsxs)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:[(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST "$MARLO_ENDPOINT/learnings" \\\n  -H "Authorization: Bearer $MARLO_WRITE_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d \'{"learning_key":"support-agent"}\'\n'})}),(0,t.jsx)(n.p,{children:"The response returns:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "learning_state": {\n    "learnings_text": "..."\n  }\n}\n'})}),(0,t.jsxs)(n.p,{children:["Inject ",(0,t.jsx)(n.code,{children:"learnings_text"})," into your system prompt before each run."]})]})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453(e,n,s){s.d(n,{R:()=>i,x:()=>r});var a=s(6540);const t={},l=a.createContext(t);function i(e){const n=a.useContext(l);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),a.createElement(l.Provider,{value:n},e.children)}}}]);