"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[688],{3481(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"features/tracing","title":"Tracing","description":"Tracing is the raw data layer. It records what your agent did, in the exact order it happened.","source":"@site/docs/features/tracing.md","sourceDirName":"features","slug":"/features/tracing","permalink":"/features/tracing","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/features/tracing.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"HTTP API","permalink":"/sdk/http"},"next":{"title":"Rewards","permalink":"/features/rewards"}}');var i=s(4848),a=s(8453);const t={sidebar_position:1},d="Tracing",l={},o=[{value:"What Tracing Captures",id:"what-tracing-captures",level:2},{value:"Why Tracing Is Required",id:"why-tracing-is-required",level:2},{value:"Agent Definition Is Not Optional",id:"agent-definition-is-not-optional",level:2},{value:"Single Agent vs Multi\u2011Agent",id:"single-agent-vs-multiagent",level:2},{value:"Task Boundaries",id:"task-boundaries",level:2},{value:"Reasoning Data",id:"reasoning-data",level:2},{value:"Where Tracing Happens",id:"where-tracing-happens",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"tracing",children:"Tracing"})}),"\n",(0,i.jsx)(n.p,{children:"Tracing is the raw data layer. It records what your agent did, in the exact order it happened."}),"\n",(0,i.jsx)(n.p,{children:"Marlo does not infer or guess. If an event is not captured, it does not exist in the trace."}),"\n",(0,i.jsx)(n.h2,{id:"what-tracing-captures",children:"What Tracing Captures"}),"\n",(0,i.jsxs)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:[(0,i.jsx)(n.p,{children:"For every task, Marlo stores a full sequence of events:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"agent_definition"}),": system prompt, tools, MCP servers, model config"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"task_start"}),": task text and metadata"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"llm_call"}),": messages, model params, response, usage, reasoning"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tool_call"}),": tool name, input, output, error"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"log"}),": any extra metadata you want to attach"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"task_end"}),": status and final answer"]}),"\n"]}),(0,i.jsx)(n.p,{children:"Each event also includes:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"agent_id"}),": the agent that produced the event"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"parent_agent_id"}),": the parent agent, if this is a sub\u2011agent"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"invocation_id"}),": trace id for the run"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"run_id"}),": session id"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"task_id"}),": task id inside the session"]}),"\n"]}),(0,i.jsx)(n.p,{children:"This is enough to rebuild the agent tree and the full timeline for every task."})]}),"\n",(0,i.jsx)(n.h2,{id:"why-tracing-is-required",children:"Why Tracing Is Required"}),"\n",(0,i.jsxs)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:[(0,i.jsx)(n.p,{children:"Rewards and learning are built from traces. If you skip tool calls or LLM calls, the judge sees an incomplete picture and the learning quality drops."}),(0,i.jsx)(n.p,{children:"So these are mandatory:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"llm_call"})," for every model call"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tool_call"})," for every tool call"]}),"\n"]})]}),"\n",(0,i.jsx)(n.h2,{id:"agent-definition-is-not-optional",children:"Agent Definition Is Not Optional"}),"\n",(0,i.jsxs)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:[(0,i.jsx)(n.p,{children:"Marlo needs the full agent definition to judge and learn correctly:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The system prompt gives the policy context"}),"\n",(0,i.jsx)(n.li,{children:"Tool definitions explain what tools exist and how to use them"}),"\n",(0,i.jsx)(n.li,{children:"MCP definitions show external resources"}),"\n",(0,i.jsx)(n.li,{children:"Model config ties outcomes to a specific model"}),"\n"]}),(0,i.jsx)(n.p,{children:"Without this, rewards and learnings will be wrong or incomplete."})]}),"\n",(0,i.jsx)(n.h2,{id:"single-agent-vs-multiagent",children:"Single Agent vs Multi\u2011Agent"}),"\n",(0,i.jsxs)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:[(0,i.jsx)(n.p,{children:"Tracing works for one agent or many agents."}),(0,i.jsx)(n.p,{children:"For multi\u2011agent systems:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Each agent emits its own events"}),"\n",(0,i.jsx)(n.li,{children:"Each agent registers its own definition"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"parent_agent_id"})," links sub\u2011agents to the root"]}),"\n"]}),(0,i.jsx)(n.p,{children:"Marlo rebuilds the full tree from these ids."})]}),"\n",(0,i.jsx)(n.h2,{id:"task-boundaries",children:"Task Boundaries"}),"\n",(0,i.jsxs)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:[(0,i.jsxs)(n.p,{children:["Each user task must be wrapped in a ",(0,i.jsx)(n.code,{children:"task_start"})," and ",(0,i.jsx)(n.code,{children:"task_end"}),".\nThis is how Marlo produces task\u2011level rewards."]}),(0,i.jsx)(n.p,{children:"If you only send a session\u2011level boundary, Marlo cannot score tasks."})]}),"\n",(0,i.jsx)(n.h2,{id:"reasoning-data",children:"Reasoning Data"}),"\n",(0,i.jsx)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:(0,i.jsxs)(n.p,{children:["If your model returns reasoning, send it in ",(0,i.jsx)(n.code,{children:"llm_call.reasoning"}),".\nIf it does not, send an empty object. The system should not crash."]})}),"\n",(0,i.jsx)(n.h2,{id:"where-tracing-happens",children:"Where Tracing Happens"}),"\n",(0,i.jsxs)("div",{className:"marlo-card",style:{border:"1px solid #E6E6E6",borderRadius:"12px",padding:"14px",backgroundColor:"#FFFFFF"},children:[(0,i.jsx)(n.p,{children:"Tracing must run in the same process where the agent executes."}),(0,i.jsx)(n.p,{children:"If you wrap a proxy or a router, you will not capture any real events."})]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453(e,n,s){s.d(n,{R:()=>t,x:()=>d});var r=s(6540);const i={},a=r.createContext(i);function t(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);